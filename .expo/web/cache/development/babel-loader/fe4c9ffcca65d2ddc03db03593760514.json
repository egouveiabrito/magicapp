{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _TabViewPropTypes = require(\"./TabViewPropTypes\");\n\nvar _jsxFileName = \"C:\\\\React\\\\magic\\\\node_modules\\\\react-navigation-deprecated-tab-navigator\\\\node_modules\\\\react-native-tab-view\\\\src\\\\TabViewPagerScroll.js\";\n\nvar TabViewPagerScroll = function (_React$Component) {\n  (0, _inherits2.default)(TabViewPagerScroll, _React$Component);\n\n  function TabViewPagerScroll(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, TabViewPagerScroll);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(TabViewPagerScroll).call(this, props));\n    _this._isIdle = true;\n    _this._isInitial = true;\n\n    _this._setInitialPage = function () {\n      if (_this.props.layout.width) {\n        _this._isInitial = true;\n\n        _this._scrollTo(_this.props.navigationState.index * _this.props.layout.width, false);\n      }\n\n      setTimeout(function () {\n        _this._isInitial = false;\n      }, 50);\n    };\n\n    _this._scrollTo = function (x) {\n      var animated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (_this._isIdle && _this._scrollView) {\n        _this._scrollView.scrollTo({\n          x: x,\n          animated: animated && _this.props.animationEnabled !== false\n        });\n      }\n    };\n\n    _this._handleMomentumScrollEnd = function (e) {\n      var nextIndex = Math.round(e.nativeEvent.contentOffset.x / _this.props.layout.width);\n      var nextRoute = _this.props.navigationState.routes[nextIndex];\n\n      if (_this.props.canJumpToTab(nextRoute)) {\n        _this.props.jumpTo(nextRoute.key);\n\n        _this.props.onAnimationEnd && _this.props.onAnimationEnd();\n      } else {\n        global.requestAnimationFrame(function () {\n          _this._scrollTo(_this.props.navigationState.index * _this.props.layout.width);\n        });\n      }\n    };\n\n    _this._handleScroll = function (e) {\n      if (_this._isInitial || e.nativeEvent.contentSize.width === 0) {\n        return;\n      }\n\n      var _this$props = _this.props,\n          navigationState = _this$props.navigationState,\n          layout = _this$props.layout;\n      var offset = navigationState.index * layout.width;\n\n      _this.props.offsetX.setValue(-offset);\n\n      _this.props.panX.setValue(offset - e.nativeEvent.contentOffset.x);\n\n      global.cancelAnimationFrame(_this._idleCallback);\n      _this._isIdle = false;\n      _this._idleCallback = global.requestAnimationFrame(function () {\n        _this._isIdle = true;\n      });\n    };\n\n    var _this$props2 = _this.props,\n        _navigationState = _this$props2.navigationState,\n        _layout = _this$props2.layout;\n    _this.state = {\n      initialOffset: {\n        x: _navigationState.index * _layout.width,\n        y: 0\n      }\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(TabViewPagerScroll, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._setInitialPage();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var amount = this.props.navigationState.index * this.props.layout.width;\n\n      if (prevProps.navigationState.routes !== this.props.navigationState.routes || prevProps.layout.width !== this.props.layout.width) {\n        this._scrollTo(amount, false);\n      } else if (prevProps.navigationState.index !== this.props.navigationState.index) {\n        this._scrollTo(amount);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          children = _this$props3.children,\n          layout = _this$props3.layout,\n          navigationState = _this$props3.navigationState,\n          onSwipeStart = _this$props3.onSwipeStart,\n          onSwipeEnd = _this$props3.onSwipeEnd;\n      return React.createElement(_reactNative.ScrollView, {\n        horizontal: true,\n        pagingEnabled: true,\n        directionalLockEnabled: true,\n        keyboardDismissMode: \"on-drag\",\n        keyboardShouldPersistTaps: \"always\",\n        overScrollMode: \"never\",\n        scrollEnabled: this.props.swipeEnabled,\n        automaticallyAdjustContentInsets: false,\n        bounces: false,\n        alwaysBounceHorizontal: false,\n        scrollsToTop: false,\n        showsHorizontalScrollIndicator: false,\n        scrollEventThrottle: 1,\n        onScroll: this._handleScroll,\n        onScrollBeginDrag: onSwipeStart,\n        onScrollEndDrag: onSwipeEnd,\n        onMomentumScrollEnd: this._handleMomentumScrollEnd,\n        contentOffset: this.state.initialOffset,\n        style: styles.container,\n        contentContainerStyle: layout.width ? null : styles.container,\n        ref: function ref(el) {\n          return _this2._scrollView = el;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        }\n      }, React.Children.map(children, function (child, i) {\n        return React.createElement(_reactNative.View, {\n          key: navigationState.routes[i].key,\n          testID: navigationState.routes[i].testID,\n          style: layout.width ? {\n            width: layout.width,\n            overflow: 'hidden'\n          } : i === navigationState.index ? styles.page : null,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          }\n        }, i === navigationState.index || layout.width ? child : null);\n      }));\n    }\n  }]);\n  return TabViewPagerScroll;\n}(React.Component);\n\nexports.default = TabViewPagerScroll;\nTabViewPagerScroll.propTypes = _TabViewPropTypes.PagerRendererPropType;\nTabViewPagerScroll.defaultProps = {\n  canJumpToTab: function canJumpToTab() {\n    return true;\n  }\n};\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  page: {\n    flex: 1,\n    overflow: 'hidden'\n  }\n});","map":{"version":3,"sources":["C:/React/magic/node_modules/react-navigation-deprecated-tab-navigator/node_modules/react-native-tab-view/src/TabViewPagerScroll.js"],"names":["TabViewPagerScroll","props","_isIdle","_isInitial","_setInitialPage","layout","width","_scrollTo","navigationState","index","setTimeout","x","animated","_scrollView","scrollTo","animationEnabled","_handleMomentumScrollEnd","e","nextIndex","Math","round","nativeEvent","contentOffset","nextRoute","routes","canJumpToTab","jumpTo","key","onAnimationEnd","global","requestAnimationFrame","_handleScroll","contentSize","offset","offsetX","setValue","panX","cancelAnimationFrame","_idleCallback","state","initialOffset","y","prevProps","amount","children","onSwipeStart","onSwipeEnd","swipeEnabled","styles","container","el","React","Children","map","child","i","testID","overflow","page","Component","propTypes","PagerRendererPropType","defaultProps","StyleSheet","create","flex"],"mappings":"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","sourcesContent":["/* @flow */\n\nimport * as React from 'react';\nimport { View, ScrollView, StyleSheet } from 'react-native';\nimport { PagerRendererPropType } from './TabViewPropTypes';\nimport type { PagerRendererProps } from './TabViewTypeDefinitions';\n\ntype ScrollEvent = {\n  nativeEvent: {\n    contentOffset: {\n      x: number,\n      y: number,\n    },\n    contentSize: {\n      height: number,\n      width: number,\n    },\n  },\n};\n\ntype State = {|\n  initialOffset: {| x: number, y: number |},\n|};\n\ntype Props<T> = PagerRendererProps<T>;\n\nexport default class TabViewPagerScroll<T: *> extends React.Component<\n  Props<T>,\n  State\n> {\n  static propTypes = PagerRendererPropType;\n\n  static defaultProps = {\n    canJumpToTab: () => true,\n  };\n\n  constructor(props: Props<T>) {\n    super(props);\n\n    const { navigationState, layout } = this.props;\n\n    this.state = {\n      initialOffset: {\n        x: navigationState.index * layout.width,\n        y: 0,\n      },\n    };\n  }\n\n  componentDidMount() {\n    this._setInitialPage();\n  }\n\n  componentDidUpdate(prevProps: Props<T>) {\n    const amount = this.props.navigationState.index * this.props.layout.width;\n\n    if (\n      prevProps.navigationState.routes !== this.props.navigationState.routes ||\n      prevProps.layout.width !== this.props.layout.width\n    ) {\n      this._scrollTo(amount, false);\n    } else if (\n      prevProps.navigationState.index !== this.props.navigationState.index\n    ) {\n      this._scrollTo(amount);\n    }\n  }\n\n  _scrollView: ?ScrollView;\n  _idleCallback: any;\n  _isIdle: boolean = true;\n  _isInitial: boolean = true;\n\n  _setInitialPage = () => {\n    if (this.props.layout.width) {\n      this._isInitial = true;\n      this._scrollTo(\n        this.props.navigationState.index * this.props.layout.width,\n        false\n      );\n    }\n\n    setTimeout(() => {\n      this._isInitial = false;\n    }, 50);\n  };\n\n  _scrollTo = (x: number, animated = true) => {\n    if (this._isIdle && this._scrollView) {\n      this._scrollView.scrollTo({\n        x,\n        animated: animated && this.props.animationEnabled !== false,\n      });\n    }\n  };\n\n  _handleMomentumScrollEnd = (e: ScrollEvent) => {\n    let nextIndex = Math.round(\n      e.nativeEvent.contentOffset.x / this.props.layout.width\n    );\n\n    const nextRoute = this.props.navigationState.routes[nextIndex];\n\n    if (this.props.canJumpToTab(nextRoute)) {\n      this.props.jumpTo(nextRoute.key);\n      this.props.onAnimationEnd && this.props.onAnimationEnd();\n    } else {\n      global.requestAnimationFrame(() => {\n        this._scrollTo(\n          this.props.navigationState.index * this.props.layout.width\n        );\n      });\n    }\n  };\n\n  _handleScroll = (e: ScrollEvent) => {\n    if (this._isInitial || e.nativeEvent.contentSize.width === 0) {\n      return;\n    }\n\n    const { navigationState, layout } = this.props;\n    const offset = navigationState.index * layout.width;\n\n    this.props.offsetX.setValue(-offset);\n    this.props.panX.setValue(offset - e.nativeEvent.contentOffset.x);\n\n    global.cancelAnimationFrame(this._idleCallback);\n\n    this._isIdle = false;\n    this._idleCallback = global.requestAnimationFrame(() => {\n      this._isIdle = true;\n    });\n  };\n\n  render() {\n    const {\n      children,\n      layout,\n      navigationState,\n      onSwipeStart,\n      onSwipeEnd,\n    } = this.props;\n\n    return (\n      <ScrollView\n        horizontal\n        pagingEnabled\n        directionalLockEnabled\n        keyboardDismissMode=\"on-drag\"\n        keyboardShouldPersistTaps=\"always\"\n        overScrollMode=\"never\"\n        scrollEnabled={this.props.swipeEnabled}\n        automaticallyAdjustContentInsets={false}\n        bounces={false}\n        alwaysBounceHorizontal={false}\n        scrollsToTop={false}\n        showsHorizontalScrollIndicator={false}\n        scrollEventThrottle={1}\n        onScroll={this._handleScroll}\n        onScrollBeginDrag={onSwipeStart}\n        onScrollEndDrag={onSwipeEnd}\n        onMomentumScrollEnd={this._handleMomentumScrollEnd}\n        contentOffset={this.state.initialOffset}\n        style={styles.container}\n        contentContainerStyle={layout.width ? null : styles.container}\n        ref={el => (this._scrollView = el)}\n      >\n        {React.Children.map(children, (child, i) => (\n          <View\n            key={navigationState.routes[i].key}\n            testID={navigationState.routes[i].testID}\n            style={\n              layout.width\n                ? { width: layout.width, overflow: 'hidden' }\n                : i === navigationState.index ? styles.page : null\n            }\n          >\n            {i === navigationState.index || layout.width ? child : null}\n          </View>\n        ))}\n      </ScrollView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  page: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n});\n"]},"metadata":{},"sourceType":"script"}